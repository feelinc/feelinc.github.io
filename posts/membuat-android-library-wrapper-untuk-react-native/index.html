<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Membuat Android library wrapper untuk React Native :: Sulaeman ‚Äî Mikir...</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Pasti manfaat React Native sudah mengerti ya buat apa, kalau belum, silahkan googling dulu gan/sis üôÇ
 Membuat aplikasi untuk Android sangat mudah menggunakan React Native bagi yang berpengalaman menggunakan JavaScript. Tetapi tidak semua komponen untuk Android tersedia. Karena bayangkan saja React Native itu seperti sebuah library yang menghubungkan antara Android native code dan JavaScript. Sehingga semua komponen yang kini tersedia atau bisa digunakan pada Android melalui React Native sebenernya sudah disediakan atau dibungkus (wrapper) oleh para kontributor React Native."/>
<meta name="keywords" content="Penggalan pengalaman, baru sempat ada waktu untuk membuat artikel kembali"/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://sulaeman.com/posts/membuat-android-library-wrapper-untuk-react-native/" />


<link rel="stylesheet" href="https://sulaeman.com/assets/style.css">

  <link rel="stylesheet" href="https://sulaeman.com/assets/green.css">






<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://sulaeman.com/img/apple-touch-icon-144-precomposed.png">

<link rel="shortcut icon" href="https://sulaeman.com/img/favicon/green.png">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Membuat Android library wrapper untuk React Native :: Sulaeman ‚Äî Mikir..." />
<meta name="twitter:description" content="Pasti manfaat React Native sudah mengerti ya buat apa, kalau belum, silahkan googling dulu gan/sis üôÇ
 Membuat aplikasi untuk Android sangat mudah menggunakan React Native bagi yang berpengalaman menggunakan JavaScript. Tetapi tidak semua komponen untuk Android tersedia. Karena bayangkan saja React Native itu seperti sebuah library yang menghubungkan antara Android native code dan JavaScript. Sehingga semua komponen yang kini tersedia atau bisa digunakan pada Android melalui React Native sebenernya sudah disediakan atau dibungkus (wrapper) oleh para kontributor React Native." />
<meta name="twitter:site" content="https://sulaeman.com/" />
<meta name="twitter:creator" content="Sulaeman" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Membuat Android library wrapper untuk React Native :: Sulaeman ‚Äî Mikir...">
<meta property="og:description" content="Pasti manfaat React Native sudah mengerti ya buat apa, kalau belum, silahkan googling dulu gan/sis üôÇ
 Membuat aplikasi untuk Android sangat mudah menggunakan React Native bagi yang berpengalaman menggunakan JavaScript. Tetapi tidak semua komponen untuk Android tersedia. Karena bayangkan saja React Native itu seperti sebuah library yang menghubungkan antara Android native code dan JavaScript. Sehingga semua komponen yang kini tersedia atau bisa digunakan pada Android melalui React Native sebenernya sudah disediakan atau dibungkus (wrapper) oleh para kontributor React Native." />
<meta property="og:url" content="https://sulaeman.com/posts/membuat-android-library-wrapper-untuk-react-native/" />
<meta property="og:site_name" content="Membuat Android library wrapper untuk React Native" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2017-06-17 16:30:12 &#43;0700 WIB" />










<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-51110409-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


</head>
<body class="">


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Sulaeman
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/tags/cloud">Cloud</a></li>
        
      
        
          <li><a href="/tags/code">Code</a></li>
        
      
        
          <li><a href="/tags/learning">Learning</a></li>
        
      
        
          <li><a href="/tags/server">Server</a></li>
        
      
        
          <li><a href="/tags/electronic">Electronic</a></li>
        
      
        
          <li><a href="https://www.linkedin.com/in/sulaeman/">LinkedIn</a></li>
        
      
        
          <li><a href="https://github.com/feelinc">Github</a></li>
        
      
        
          <li><a href="https://twitter.com/sulaeman">Twitter</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/tags/cloud">Cloud</a></li>
      
    
      
        <li><a href="/tags/code">Code</a></li>
      
    
      
        <li><a href="/tags/learning">Learning</a></li>
      
    
      
        <li><a href="/tags/server">Server</a></li>
      
    
      
        <li><a href="/tags/electronic">Electronic</a></li>
      
    
      
        <li><a href="https://www.linkedin.com/in/sulaeman/">LinkedIn</a></li>
      
    
      
        <li><a href="https://github.com/feelinc">Github</a></li>
      
    
      
        <li><a href="https://twitter.com/sulaeman">Twitter</a></li>
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://sulaeman.com/posts/membuat-android-library-wrapper-untuk-react-native/">Membuat Android library wrapper untuk React Native</a></h1>
  <div class="post-meta">
      
    <span class="post-date">
      2017-06-17
    </span>
    
    
    <span class="post-author">::
      Sulaeman
    </span>
    
  </div>

  
  <span class="post-tags">
    
    #<a href="https://sulaeman.com/tags/learning/">learning</a>&nbsp;
    
    #<a href="https://sulaeman.com/tags/code/">code</a>&nbsp;
    
  </span>
  

  

  <div class="post-content">
    <p><img src="/img/create-react-native-library.png" alt="Membuat Android library wrapper untuk React Native" /></p>

<blockquote>
<p>Pasti manfaat React Native sudah mengerti ya buat apa, kalau belum, silahkan googling dulu gan/sis üôÇ</p>
</blockquote>

<p>Membuat aplikasi untuk Android sangat mudah menggunakan React Native bagi yang berpengalaman menggunakan JavaScript. Tetapi tidak semua komponen untuk Android tersedia. Karena bayangkan saja React Native itu seperti sebuah library yang menghubungkan antara Android native code dan JavaScript. Sehingga semua komponen yang kini tersedia atau bisa digunakan pada Android melalui React Native sebenernya sudah disediakan atau dibungkus (wrapper) oleh para kontributor React Native.</p>

<p>Berarti jika sebuah komponen yang dibutuhkan tidak tersedia di React Native, maka harus membuat sendiri. Contoh jika ingin mengimplementasi pembayaran menggunakan Paypal pada aplikasi Android. Sebenarnya Paypal sudah menyediakan SDK khusus Android, tetapi masih berupa library native, belum dibungkus untuk dapat digunakan pada React Native.</p>

<p>Sekarang mari kita coba membuat Android library wrapper React Native untuk mengimplementasi Paypal Android SDK.</p>

<h2>1. Requirement</h2>

<ul>
<li>Tools untuk membuat aplikasi Android (Android Studio, dan sebagainya) pastikan semua berfungsi.</li>
<li>Sebuah aplikasi basic yang dibuat menggunakan React Native, pastikan berfungsi.</li>
<li>Koneksi internet.</li>
</ul>

<h2>2. Preparation</h2>

<ul>
<li>Install library <a href="https://github.com/frostney/react-native-create-library">https://github.com/frostney/react-native-create-library</a> menggunakan NPM.</li>
<li>Buat sebuah basic library menggunakan library tadi, contoh <code>PaypalWrapper</code>.</li>
</ul>

<p><img src="/img/create-react-native-library-1.jpg" alt="" /></p>

<ul>
<li>Basic library yang telah dibuat barusan akan memiliki struktur seperti gambar dibawah.</li>
</ul>

<p><img src="/img/create-react-native-library-2.jpg" alt="" /></p>

<ul>
<li>Kemudian install React Native menggunakan NPM didalam folder library tadi. Hasilnya akan mendapatkan folder ‚Äúnode_modules‚Äù baru seperti pada gambar dibawah.</li>
</ul>

<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td><img src="/img/create-react-native-library-3.jpg" alt="" /></td>
<td><img src="/img/create-react-native-library-4.jpg" alt="" /></td>
</tr>
</tbody>
</table>

<h2>3. Coding Preparation</h2>

<p>Sekarang ganti terlebih dahulu nama package Android nya. Yaitu dengan membuka file <code>android/src/main/java/AndroidManifest.xml</code>. Ganti <code>com.reactlibrary</code> menjadi <code>com.namasaya.RNPaypalWrapper</code>. Silahkan ganti <code>namasaya</code> terserah.</p>

<p>Kemudian ganti struktur folder nya seperti di gambar dibawah. Menjadi seperti di gambar setelahnya. Mengganti nama <code>reactlibrary</code> menjadi <code>RNPaypalWrapper</code> dan masukan ke folder <code>namasaya</code>.</p>

<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td><img src="/img/create-react-native-library-5.jpg" alt="" /></td>
<td><img src="/img/create-react-native-library-6.jpg" alt="" /></td>
</tr>
</tbody>
</table>

<p>Kemudian ganti <code>package com.reactlibrary</code> menjadi <code>package com.namasaya.RNPaypalWrapper</code> didalam semua file .java yang ada didalam folder <code>RNPaypalWrapper</code> tadi.</p>

<p>Kemudian buka folder library <code>android</code> menggunakan Android Studio. Setelah terbuka, biarkan Gradle melakukan pekerjaannya sampai selesai, akan terlihat progress bar dibawah Android Studio.</p>

<p>Kemudian buka <code>Gradle Scripts -&gt; build.gradle</code> di Android Studio. Set konfigurasi untuk menambahkan React Native sebagai salah satu dependency, seperti terlihat pada gambar dibawah.</p>

<p><img src="/img/create-react-native-library-7.jpg" alt="" /></p>

<p>Maka akan muncul notifikasi <code>Gradle files have changed since‚Ä¶.</code>, maka klik saja link <code>Sync..</code>, dan biarkan gradle bekerja kembali sampai selesai.</p>

<p>Kemudian lanjutkan konfigurasi untuk menambahkan Paypal Android SDK. Masih didalam ‚Äúbuild.gradle‚Äù, tambahkan seperti terlihat pada gambar dibawah.</p>

<p><img src="/img/create-react-native-library-8.jpg" alt="" /></p>

<p>Selanjutnya lakukan kembali <code>Sync‚Ä¶</code> untuk gradle, dan biarkan gradle bekerja sampai selesai.</p>

<h2>4. Coding</h2>

<p>Karena native library wrapper ini sederhana, maka coding yang akan dilakukan hanya pada file <code>RNPaypalWrapperModule.java</code> saja.</p>

<p>Isi dari file tersebut dapat dilihat pada Gist berikut : <a href="https://gist.github.com/feelinc/e29a11f3b19a6e2c848f9a01826e1a65">https://gist.github.com/feelinc/e29a11f3b19a6e2c848f9a01826e1a65</a></p>

<h4>Very Basic Coding Explanation</h4>

<ul>
<li><strong>Constant</strong></li>
</ul>

<pre><code class="language-java">@Override
public Map getConstants() {
    final Map constants = new HashMap();
    constants.put(‚ÄúNO_NETWORK‚Äù, PayPalConfiguration.ENVIRONMENT_NO_NETWORK);
    constants.put(‚ÄúSANDBOX‚Äù, PayPalConfiguration.ENVIRONMENT_SANDBOX);
    constants.put(‚ÄúPRODUCTION‚Äù, PayPalConfiguration.ENVIRONMENT_PRODUCTION);
    constants.put(ERROR_USER_CANCELLED, ERROR_USER_CANCELLED);
    constants.put(ERROR_INVALID_CONFIG, ERROR_INVALID_CONFIG);
    constants.put(ERROR_INTERNAL_ERROR, ERROR_INTERNAL_ERROR);
    return constants;
}
</code></pre>

<p>Pada bagian diatas adalah mengdefinisikan beberapa constant yang dapat digunakan oleh JavaScript dalam aplikasi yang dibuat menggunakan React Native. Contoh nya :</p>

<pre><code class="language-javascript">import PaypalWrapper from ‚Äòreact-native-paypal-wrapper‚Äô

console.log(PaypalWrapper.SANDBOX)
console.log(PaypalWrapper.ERROR_USER_CANCELLED)
</code></pre>

<ul>
<li><strong>Method</strong></li>
</ul>

<p>Pada bagian diatas adalah mengdefinisikan beberapa constant yang dapat digunakan oleh JavaScript dalam aplikasi yang dibuat menggunakan React Native. Contoh nya :</p>

<pre><code class="language-java">@ReactMethod
public void initialize(String environment, String clientId) {
    config = new PayPalConfiguration().environment(environment).clientId(clientId);

    Intent intent = new Intent(reactContext, PayPalService.class);
    intent.putExtra(PayPalService.EXTRA_PAYPAL_CONFIGURATION, config);
    reactContext.startService(intent);
}
</code></pre>

<p>Pada bagian diatas adalah mengdefinisikan sebuah method yang dapat digunakan oleh JavaScript dalam aplikasi yang dibuat menggunakan React Native. Contoh nya :</p>

<pre><code class="language-javascript">import PaypalWrapper from ‚Äòreact-native-paypal-wrapper‚Äô

PaypalWrapper.initialize(PaypalWrapper.SANDBOX, ‚Äòxxxxxx‚Äô)
</code></pre>

<p>Perbedaan dengan method lain adalah, method yang dapat digunakan oleh JavaScript memiliki <code>@ReactMethod</code> diatasnya, disebut annotations.</p>

<h2>5. Deploy</h2>

<p>Sekarang library tadi akan diimplementasi pada sebuah aplikasi React Native. Sebelumnya buang dulu bagian dibawah didalam <code>build.gradle</code> :</p>

<pre><code class="language-java">maven {
    // All of React Native (JS, Android binaries) is installed from npm
    url ‚Äú$rootDir/../node_modules/react-native/android‚Äù
}
</code></pre>

<p>Kemudian ganti dependencies <code>react-native</code> seperti dibawah. Karena sebelumnya menggunakan versi <code>0.45.1</code>, maka nanti akan mengikuti versi yang digunakan oleh aplikasi React Native yang tersedia. Jika ternyata tidak cocok, maka harap sesuaikan versi React Native nya dengan yang dibutuhkan oleh library ini.</p>

<pre><code class="language-java">dependencies {
    compile ‚Äòcom.facebook.react:react-native:+‚Äô
    compile ‚Äòcom.paypal.sdk:paypal-android-sdk:2.15.3‚Äô
}
</code></pre>

<p>Sehingga tidak terjadi konflik ketika melakukan build di aplikasi React Native.</p>

<ul>
<li>Buat folder <code>react-native-paypal-wrapper</code> didalam folder <code>node_modules</code> pada aplikasi React Native yang sudah tersedia.</li>
<li>Kemudian copy semua isi dari folder <code>PaypalWrapper</code>, kedalam folder <code>react-native-paypal-wrapper</code>. Kecuali folder <code>node_modules</code>.</li>
<li>Buka folder <code>android</code> pada aplikasi React Native yang tersedia menggunakan Android Studio.</li>
<li>Buka file <code>settings.gradle</code> di Android Studio, kemudian tambahkan baris dibawah</li>
</ul>

<pre><code class="language-java">include ‚Äò:react-native-paypal-wrapper‚Äô
project(‚Äò:react-native-paypal-wrapper‚Äô).projectDir = new File(rootProject.projectDir, ‚Äò../node_modules/react-native-paypal-wrapper/android‚Äô)
</code></pre>

<ul>
<li>Selanjutnya lakukan kembali <code>Sync‚Ä¶</code> untuk gradle, dan biarkan gradle bekerja sampai selesai.</li>
<li>Buka file <code>android/app/build.gradle</code> di Android Studio, kemudian tambahkan baris seperti terlihat pada gambar dibawah yang ditandai garis merah.</li>
</ul>

<p><img src="/img/create-react-native-library-9.jpg" alt="" /></p>

<ul>
<li>Selanjutnya lakukan kembali <code>Sync‚Ä¶</code> untuk gradle, dan biarkan gradle bekerja sampai selesai.</li>
<li>Buka file <code>MainApplication.java</code> di Android Studio, kemudian tambahkan baris seperti terlihat pada gambar dibawah yang ditandai garis merah.</li>
</ul>

<p><img src="/img/create-react-native-library-10.jpg" alt="" /></p>

<h2>6. Usage</h2>

<p>Sekarang coba pakai library yang telah diimplementasikan dalam React Native JavaScript. Pastikan terlebih dahulu Packager (<code>npm start</code>) dan Android Virtual Device atau Device (terdeteksi di adb devices) sudah berjalan.</p>

<p>Jalankan perintah dibawah didalam folder aplikasi React Native tadi.</p>

<p><code>react-native run-android</code></p>

<p>Buka komponen utama aplikasi React Native tadi menggunakan code editor. Kemudian import library tadi.</p>

<pre><code class="language-javascript">import PaypalWrapper from ‚Äòreact-native-paypal-wrapper‚Äô
</code></pre>

<p>Sekarang tinggal digunakan. Contoh digunakan pada <code>componentDidMount</code> :</p>

<pre><code class="language-javascript">componentDidMount () {
	const clientId = ‚Äòxxxxxxxxxx‚Äô
	PaypalWrapper.initialize(PaypalWrapper.SANDBOX, clientId)
	PaypalWrapper.pay({
		total: ‚Äò20.99‚Äô,
		currency: ‚ÄòUSD‚Äô,
		description: ‚ÄòCart‚Äô
	}).then(response =&gt; console.log(response))
	.catch(error =&gt; console.log(error))
}
</code></pre>

<p>Maka akan muncul seperti terlihat pada gambar dibawah.</p>

<p><img src="/img/create-react-native-library-11.jpg" alt="" /></p>

  </div>
  
  <div class="pagination">
    <div class="pagination__title">
      <span
        class="pagination__title-h">Read other posts</span>
      <hr />
    </div>
    <div class="pagination__buttons">
      
      <span class="button previous">
        <a href="https://sulaeman.com/posts/memperbaiki-performance-mobile-app-yang-dibangun-menggunakan-react-native/">
          <span class="button__icon">‚Üê</span>
          <span class="button__text">Memperbaiki performance mobile app yang dibangun menggunakan React Native</span>
        </a>
      </span>
      
      
      <span class="button next">
        <a href="https://sulaeman.com/posts/memeriksa-pembayaran-transaksi-jualan-online-di-bank/">
          <span class="button__text">Memeriksa pembayaran transaksi jualan online di Bank</span>
          <span class="button__icon">‚Üí</span>
        </a>
      </span>
      
    </div>
  </div>
  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">&copy; 2019 Sulaeman :: Powered by gohugo.io</div>
    
  </div>
</footer>

<script src="https://sulaeman.com/assets/main.js"></script>
<script src="https://sulaeman.com/assets/prism.js"></script>





  
</div>

</body>
</html>
